{
  "namespace": "enchanting_screen",
  "enchanting_panel@container_common.container_details": {
    "size": [176, 166],
    "layer": 5,
    "$screen_controls": [
      {
        "portal@screen_content.image_element": {
          "layer": 5,
          "texture": "assets/advanced_sprites/animated/enchant.png",
          "anchor_from": "top_left",
          "anchor_to": "top_left",
          "size": [16, 16],
          "animation_reset_name": "screen_animation_reset",
          "offset": [15, 47],
          "uv_size": [16, 16],
          "uv": "@portal.portal_0",
          "disable_anim_fast_forward": true
        }
      },
      { "base_panel@screen_content.container_base": { "$enchanting_screen": true } },
      {
        "top_half@global.empty_stack": {
          "orientation": "vertical",
          "size": [117, 71],
          "anchor_to": "top_right",
          "anchor_from": "top_right",
          "controls": [
            { "top_filler@global.empty_panel": { "size": ["fill", 13] } },
            {
              "buttons_row@global.empty_stack": {
                "orientation": "horizontal",
                "size": [117, 57],
                "controls": [
                  {
                    "enchantments_button_grid": {
                      "type": "grid",
                      "layer": 6,
                      "size": [108, 57],
                      "collection_name": "#enchant_buttons",
                      "grid_dimensions": [1, 3],
                      "controls": [
                        {
                          "btn_1@enchanting_screen.button_template": {
                            "$button_index|default": "1",
                            "grid_position": [0, 0]
                          }
                        },
                        {
                          "btn_2@enchanting_screen.button_template": {
                            "$button_index|default": "2",
                            "grid_position": [0, 1]
                          }
                        },
                        {
                          "btn_3@enchanting_screen.button_template": {
                            "$button_index|default": "3",
                            "grid_position": [0, 2]
                          }
                        }
                      ]
                    }
                  },
                  { "right_filler@global.empty_panel": { "size": [9, "fill"] } }
                ]
              }
            },
            { "top_filler@global.empty_panel": { "size": ["fill", 1] } }
          ]
        }
      },
      {
        "bottom@global.inventory_bottom_half": { "anchor_to": "bottom_middle", "anchor_from": "bottom_middle" }
      },
      {
        "lapis_and_book_stack@global.empty_stack": {
          "orientation": "vertical",
          "size": [90, 64],
          "anchor_to": "top_left",
          "anchor_from": "top_left",
          "controls": [
            { "filler_1@global.empty_panel": { "size": ["fill", 46] } },
            {
              "enchanting_input_grids@global.empty_stack": {
                "orientation": "horizontal",
                "size": [52, 18],
                "controls": [
                  { "filler_1@global.empty_panel": { "size": [14, "fill"] } },
                  {
                    "item_input": {
                      "type": "grid",
                      "size": [18, 18],
                      "layer": 5,
                      "grid_dimensions": [1, 1],
                      "grid_item_template": "common.container_item",
                      "collection_name": "enchanting_input_items",
                      "$item_collection_name": "enchanting_input_items"
                    }
                  },
                  { "filler_2@global.empty_panel": { "size": [2, "fill"] } },
                  {
                    "lapis_input": {
                      "type": "grid",
                      "size": [18, 18],
                      "layer": 5,
                      "grid_dimensions": [1, 1],
                      "grid_item_template": "common.container_item",
                      "collection_name": "enchanting_lapis_items",
                      "$item_collection_name": "enchanting_lapis_items"
                    }
                  }
                ]
              }
            }
          ]
        }
      },
      {
        "enchanting_book@global.empty_stack": {
          "orientation": "vertical",
          "size": [53, 46],
          "anchor_to": "top_left",
          "anchor_from": "top_left",
          "controls": [
            { "filler_1@global.empty_panel": { "size": ["fill", 6] } },
            {
              "second_stack@global.empty_stack": {
                "orientation": "horizontal",
                "size": [53, 40],
                "controls": [
                  { "filler_2@global.empty_panel": { "size": [13, "fill"] } },
                  {
                    "enchanting_book_holder@global.empty_panel": {
                      "size": [40, 40],
                      "controls": [
                        {
                          "enchanting_book@global.custom_renderer": {
                            "$type": "enchanting_book_renderer",
                            "layer": 13,
                            "offset": [0, 5],
                            "anchor_to": "center",
                            "anchor_from": "center",
                            "animation_reset_name": "screen_animation_reset",
                            "anims": [
                              "@common.screen_exit_size_animation_push",
                              "@common.screen_exit_size_animation_pop",
                              "@common.screen_entrance_size_animation_push",
                              "@common.screen_entrance_size_animation_pop"
                            ],
                            "bindings": [{ "binding_name": "#open", "binding_type": "global" }]
                          }
                        }
                      ]
                    }
                  }
                ]
              }
            }
          ]
        }
      }
    ]
  },
  "button_template@global.empty_panel": {
    "size": [108, 19],
    "$binding_collection|default": "#enchant_buttons",
    "controls": [
      {
        "unselectable_button@enchanting_screen.button_common": {
          "default_control": "default",
          "pressed_control": "default",
          "hover_control": "hover",
          "$visibility_binding_name": "#unselectable_button_visibility",
          "layer": 12,
          "button_mappings": [],
          "controls": [
            { "default@enchanting_screen.unselectable_button_controls": {} },
            { "hover@enchanting_screen.unselectable_button_controls": {} }
          ]
        }
      },
      { "bg@screen_content.enchanting_button_disabled": { "layer": 4 } },
      {
        "selectable_button@enchanting_screen.button_common": {
          "default_control": "default",
          "pressed_control": "default",
          "hover_control": "hover",
          "$visibility_binding_name": "#selectable_button_visibility",
          "layer": 12,
          "button_mappings": [
            { "from_button_id": "button.menu_select", "to_button_id": "button.menu_ok", "mapping_type": "pressed" },
            { "from_button_id": "button.menu_ok", "to_button_id": "button.menu_ok", "mapping_type": "focused" },
            {
              "from_button_id": "button.controller_back",
              "to_button_id": "button.menu_ok",
              "mapping_type": "focused",
              "ignored": "(not $is_ps4)"
            }
          ],
          "controls": [
            { "default@enchanting_screen.selectable_button_controls": {} },
            {
              "hover@enchanting_screen.selectable_button_controls": {
                "$enchant_rune_color|default": "$enchant_light_yellow",
                "$button_texture_path": "screen_content.enchanting_button_highlight"
              }
            }
          ]
        }
      }
    ]
  },
  "selectable_button_controls@global.empty_panel": {
    "$button_texture_path|default": "screen_content.enchanting_button",
    "$enchant_rune_color|default": "$enchant_light_brown",
    "controls": [
      { "bg@$button_texture_path": {} },
      { "dust_template@enchanting_screen.dust_template": {} },
      { "cost@enchanting_screen.cost": { "color": "$enchant_light_green" } },
      { "runes@enchanting_screen.runes": { "color": "$enchant_rune_color" } }
    ]
  },
  "unselectable_button_controls@global.empty_panel": {
    "controls": [
      { "bg@screen_content.enchanting_button_disabled": {} },
      { "dust_template@enchanting_screen.dust_template": {} },
      { "cost@enchanting_screen.cost": { "color": "$enchant_dark_green" } },
      { "runes@enchanting_screen.runes": { "color": "$enchant_light_brown" } }
    ]
  },
  "dust_template@global.empty_panel": {
    "$texture_selectable": "('assets/sprites/level_' + $button_index)",
    "$texture_unselectable": "('assets/sprites/level_' + $button_index + '_disabled')",
    "controls": [
      {
        "dust_sel@enchanting_screen.dust_image": {
          "$button_texture_enchant": "$texture_selectable",
          "$button_type_enchant": "selectable"
        }
      },
      {
        "dust_unsel@enchanting_screen.dust_image": {
          "$button_texture_enchant": "$texture_unselectable",
          "$button_type_enchant": "unselectable"
        }
      }
    ]
  },
  "dust_image@screen_content.image_element": {
    "anchor_to": "left_middle",
    "anchor_from": "left_middle",
    "keep_ratio": true,
    "layer": 6,
    "texture": "$button_texture_enchant",
    "size": [16, 16],
    "offset": [2, 1],
    "bindings": [
      {
        "binding_name": "('#' + $button_type_enchant + '_dust_is_visible')",
        "binding_name_override": "#visible",
        "binding_collection_name": "#enchant_buttons",
        "binding_type": "collection"
      }
    ]
  },
  "cost@global.empty_label": {
    "shadow": true,
    "layer": 9,
    "anchor_from": "bottom_right",
    "anchor_to": "bottom_right",
    "text": "#exp_cost",
    "offset": [-1, 0],
    "bindings": [
      {
        "binding_name": "#cost",
        "binding_name_override": "#exp_cost",
        "binding_collection_name": "#enchant_buttons",
        "binding_type": "collection"
      },
      {
        "binding_type": "view",
        "binding_condition": "always",
        "source_property_name": "((#exp_cost * 1) > 0)",
        "target_property_name": "#visible"
      }
    ]
  },
  "runes@global.empty_label": {
    "shadow": false,
    "text": "#runes",
    "layer": 9,
    "offset": [10, 1],
    "size": [84, 16],
    "font_type": "rune",
    "bindings": [
      {
        "binding_collection_name": "#enchant_buttons",
        "binding_name": "#runes",
        "binding_type": "collection"
      }
    ]
  },

  "button_common@common.button": {
    "sound_volume": 0.0,
    "layer": 22,
    "size": [108, 19],
    "bindings": [
      { "binding_type": "collection_details", "binding_collection_name": "$binding_collection" },
      {
        "binding_name": "$visibility_binding_name",
        "binding_name_override": "#visible",
        "binding_condition": "always",
        "binding_collection_name": "$binding_collection",
        "binding_type": "collection"
      }
    ]
  }
}
